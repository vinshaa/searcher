XMLHttpRequest                    From Wikipedia, the free encyclopedia                            Jump to:     navigation,      search          HTTP PersistenceCompressionHTTPS Request methods OPTIONSGETHEADPOSTPUTDELETETRACECONNECTPATCH Header fields CookieETagLocationHTTP refererDNTX-Forwarded-For Status codes 301 Moved Permanently302 Found303 See Other403 Forbidden404 Not Found   vte   XMLHttpRequest (XHR) is an API available to web browser scripting languages such as JavaScript. It is used to send HTTP or HTTPS requests to a web server and load the server response data back into the script.[1] Development versions of all major browsers support URI schemes beyond http and https, in particular, blob URLs are supported.[2] Data from the response can be used to alter the current document in the browser window without loading a new web page, and despite the name of the API, this data can be in the form of not only XML,[3] but also JSON,[4] HTML or plain text.[5] The response data can also be evaluated by client-side scripting. For example, if it was formatted as JSON by the web server, it can be converted into a client-side data object for further use. The Ajax web development technique used by many websites to implement responsive and dynamic web applications depends on XMLHttpRequest. For security reasons, XMLHttpRequest requests follow the browser's same-origin policy, and will therefore only succeed if they are made to the host that served the original web page.    Contents  1 History and support 1.1 Support in Internet Explorer versions 5, 5.5, and 6 2 HTTP request 2.1 The open method2.2 The setRequestHeader method2.3 The send method2.4 The onreadystatechange event listener2.5 The abort method2.6 The HTTP response 3 Cross-domain requests4 See also5 References6 External links 6.1 Specifications6.2 Browsers6.3 Other    History and support[edit] The concept behind the XMLHttpRequest object was originally created by the developers of Outlook Web Access (by Microsoft) for Microsoft Exchange Server 2000.[6] An interface called IXMLHTTPRequest was developed and implemented into the second version of the MSXML library using this concept.[6][7] The second version of the MSXML library was shipped with Internet Explorer 5.0 in March 1999, allowing access, via ActiveX, to the IXMLHTTPRequest interface using the XMLHTTP wrapper of the MSXML library.[8] The Mozilla project developed and implemented an interface called nsIXMLHttpRequest into the Gecko layout engine. This interface was modeled to work as closely to Microsoft's IXMLHTTPRequest interface as possible.[9][10] Mozilla created a wrapper to use this interface through a JavaScript object which they called XMLHttpRequest.[11] The XMLHttpRequest object was accessible as early as Gecko version 0.6 released on December 6 of 2000,[12][13] but it was not completely functional until as late as version 1.0 of Gecko released on June 5, 2002.[12][13] The XMLHttpRequest object became a de facto standard in other major web clients, implemented in Safari 1.2 released in February 2004,[14] Konqueror, Opera 8.0 released in April 2005,[15] and iCab 3.0b352 released in September 2005.[16] The World Wide Web Consortium published a Working Draft specification for the XMLHttpRequest object on April 5, 2006, edited by Anne van Kesteren of Opera Software and Dean Jackson of W3C.[17] Its goal is "to document a minimum set of interoperable features based on existing implementations, allowing Web developers to use these features without platform-specific code." The last revision to the XMLHttpRequest object specification was on November 19 of 2009, being a last call working draft.[18] [19] Microsoft added the XMLHttpRequest object identifier to its scripting languages in Internet Explorer 7.0 released in October 2006.[8] With the advent of cross-browser JavaScript libraries such as jQuery and the Prototype JavaScript Framework, developers can invoke XMLHttpRequest functionality without coding directly to the API. Prototype provides an asynchronous requester object called Ajax.Request that wraps the browser's underlying implementation and provides access to it.[20] jQuery objects represent or wrap elements from the current client-side DOM. They all have a .load() method that takes a URI parameter and makes an XMLHttpRequest to that URI, then by default places any returned HTML into the HTML element represented by the jQuery object.[21][22] The W3C has since published another Working Draft specification for the XMLHttpRequest object, "XMLHttpRequest Level 2", on February 25 of 2008.[23] Level 2 consists of extended functionality to the XMLHttpRequest object, including, but not limited to, progress events, support for cross-site requests, and the handling of byte streams. The latest revision of the XMLHttpRequest Level 2 specification is that of 16 August 2011, which is still a working draft.[24] As of 5 December 2011[update], XMLHttpRequest[25] version 2 has been merged into the main XMLHttpRequest specification, and there is no longer a version 1 and a version 2. Support in Internet Explorer versions 5, 5.5, and 6[edit] Internet Explorer versions 5 and 6 did not define the XMLHttpRequest object identifier in their scripting languages as the XMLHttpRequest identifier itself was not standard at the time of their releases.[8] Backward compatibility can be achieved through object detection if the XMLHttpRequest identifier does not exist.[26] Web pages that use XMLHttpRequest or XMLHTTP can mitigate the current minor differences in the implementations either by encapsulating the XMLHttpRequest object in a JavaScript wrapper, or by using an existing framework that does so. In either case, the wrapper should detect the abilities of current implementation and work within its requirements. Until 8 April 2014 Microsoft supported Windows XP and so Internet Explorer 6 - a JavaScript encapsulation example is provided below.   /*    Provide the XMLHttpRequest constructor for Internet Explorer 5.x-6.x:    Other browsers (including Internet Explorer 7.x-9.x) do not redefine    XMLHttpRequest if it already exists.     This example is based on findings at:    http://blogs.msdn.com/xmlteam/archive/2006/10/23/using-the-right-version-of-msxml-in-internet-explorer.aspx */ if (typeof XMLHttpRequest === "undefined") {   XMLHttpRequest = function () {     try { return new ActiveXObject("Msxml2.XMLHTTP.6.0"); }     catch (e) {}     try { return new ActiveXObject("Msxml2.XMLHTTP.3.0"); }     catch (e) {}     try { return new ActiveXObject("Microsoft.XMLHTTP"); }     catch (e) {}     throw new Error("This browser does not support XMLHttpRequest.");   }; }  HTTP request[edit]   This section does not cite any references or sources. Please help improve this section by adding citations to reliable sources. Unsourced material may be challenged and removed. (October 2010) The following sections demonstrate how a request using the XMLHttpRequest object functions within a conforming user agent based on the W3C Working Draft. As the W3C standard for the XMLHttpRequest object is still a draft, user agents may not abide by all the functionings of the W3C definition and any of the following is subject to change. Extreme care should be taken into consideration when scripting with the XMLHttpRequest object across multiple user agents. This article will try to list the inconsistencies between the major user agents. The open method[edit]   This article may be confusing or unclear to readers. Please help us clarify the article; suggestions may be found on the talk page. (October 2010) The HTTP and HTTPS requests of the XMLHttpRequest object must be initialized through the open method. This method must be invoked prior to the actual sending of a request to validate and resolve the request method, URL, and URI user information to be used for the request. This method does not assure that the URL exists or the user information is correct. This method can accept up to five parameters, but requires only two, to initialize a request.  open( Method, URL, Asynchronous, UserName, Password )  The first parameter of the method is a text string indicating the HTTP request method to use. The request methods that must be supported by a conforming user agent, defined by the W3C draft for the XMLHttpRequest object, are currently listed as the following.[27] GET (Supported by Internet Explorer 7 (and later), Mozilla 1+)POST (Supported by Internet Explorer 7 (and later), Mozilla 1 (and later))HEAD (Supported by Internet Explorer 7 (and later))PUTDELETEOPTIONS (Supported by Internet Explorer 7 (and later)) However, request methods are not limited to the ones listed above. The W3C draft states that a browser may support additional request methods at their own discretion. The second parameter of the method is another text string, this one indicating the URL of the HTTP request. The W3C recommends that browsers should raise an error and not allow the request of a URL with either a different port or ihost URI component from the current document.[28] The third parameter, a boolean value indicating whether or not the request will be asynchronous, is not a required parameter by the W3C draft. The default value of this parameter should be assumed to be true by a W3C conforming user agent if it is not provided. An asynchronous request ("true") will not wait on a server response before continuing on with the execution of the current script. It will instead invoke the onreadystatechange event listener of the XMLHttpRequest object throughout the various stages of the request. A synchronous request ("false") however will block execution of the current script until the request has been completed, thus not invoking the onreadystatechange event listener. The fourth and fifth parameters are the username and password, respectively. These parameters, or just the username, may be provided for authentication and authorization if required by the server for this request. The setRequestHeader method[edit] Upon successful initialization of a request, the setRequestHeader method of the XMLHttpRequest object can be invoked to send HTTP headers with the request.  setRequestHeader( Name, Value )  The first parameter of this method is the text string name of the header. The second parameter is the text string value. This method must be invoked for each header that needs to be sent with the request. Any headers attached here will be removed the next time the open method is invoked in a W3C conforming user agent. The send method[edit] To send an HTTP request, the send method of the XMLHttpRequest must be invoked. This method accepts a single parameter containing the content to be sent with the request.  send( Data )  This parameter may be omitted if no content needs to be sent. The W3C draft states that this parameter may be any type available to the scripting language as long as it can be turned into a text string, with the exception of the DOM document object. If a user agent cannot serialise the parameter, then the parameter should be ignored. Firefox 3.0.x and previous versions will however throw an exception if send is called without an argument.[29] If the parameter is a DOM document object, a user agent should assure the document is turned into well-formed XML using the encoding indicated by the inputEncoding property of the document object. If the Content-Type request header was not added through setRequestHeader yet, it should automatically be added by a conforming user agent as "application/xml;charset=charset," where charset is the encoding used to encode the document. If the user agent is configured to use a proxy server, then the XMLHttpRequest object will modify the request appropriately so as to connect to the proxy instead of the origin server, and send Proxy-Authorization headers as configured. The onreadystatechange event listener[edit] If the open method of the XMLHttpRequest object was invoked with the third parameter set to true for an asynchronous request, the onreadystatechange event listener will be automatically invoked for each of the following actions that change the readyState property of the XMLHttpRequest object. State changes work like this: After the open method has been invoked successfully, the readyState property of the XMLHttpRequest object should be assigned a value of 1 (OPENED).After the send method has been invoked and the HTTP response headers have been received, the readyState property of the XMLHttpRequest object should be assigned a value of 2 (HEADERS_RECEIVED).Once the HTTP response content begins to load, the readyState property of the XMLHttpRequest object should be assigned a value of 3 (LOADING).Once the HTTP response content has finished loading, the readyState property of the XMLHttpRequest object should be assigned a value of 4 (DONE). The listener will only respond to state changes which occur after the listener is defined. To detect states 1 and 2, the listener must be defined before the open method is invoked. The open method must be invoked before the send method is invoked.   var request = new XMLHttpRequest(); request.onreadystatechange = function () {     var DONE = this.DONE || 4;     if (this.readyState === DONE){         alert(this.readyState);     } }; request.open('GET', 'somepage.xml', true); request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');  // Tells server that this call is made for ajax purposes.                                                                  // Most libraries like jQuery/Prototype/Dojo do this request.send(null);  // No data needs to be sent along with the request.  The abort method[edit] This method aborts the request if the readyState of the XMLHttpRequest object has not yet become 4.[30] The abort method ensures that the callback handler does not get invoked during an asynchronous request.  abort( )  Some AJAX libraries use the abort method to cancel potential duplicate or out-of-order requests.[31] The HTTP response[edit] After a successful and completed call to the send method of the XMLHttpRequest, if the server response was well-formed XML and the Content-Type header sent by the server is understood by the user agent as an Internet media type for XML, the responseXML property of the XMLHttpRequest object will contain a DOM document object. Another property, responseText will contain the response of the server in plain text by a conforming user agent, regardless of whether or not it was understood as XML. Cross-domain requests[edit] In the early development of the World Wide Web, it was found possible to breach users' security by the use of JavaScript to exchange information from one web site with that from another less reputable one. All modern browsers therefore implement a same origin policy that prevents many such attacks, such as cross-site scripting. XMLHttpRequest data is subject to this security policy, but sometimes web developers want to intentionally circumvent its restrictions. This is sometimes due to the legitimate use of subdomains as, for example, making an XMLHttpRequest from a page created by foo.example.com for information from bar.example.com will normally fail. Various alternatives exist to circumvent this security feature, including using JSONP, Cross-Origin Resource Sharing (CORS) or alternatives with plugins such as Flash or Silverlight. Cross-origin XMLHttpRequest is specified in W3C's XMLHttpRequest Level 2 specification.[32] Internet Explorer did not implement CORS until version 10. The two previous versions (8 and 9) offered similar functionality through the XDomainRequest API. It is now supported by all modern browsers (desktop and mobile).[33] The CORS protocol has several restrictions, with two models of support. The simple model does not allow setting custom request headers and omits cookies. Further, only the GET and POST request methods are supported, and POST only allows the following MIME types: "text/plain", "application/x-www-urlencoded" and "multipart/form-data". Only "text/plain" was initially supported.[34] The other model detects when one of the non-simple features are requested and sends a pre-flight request[35] to the server to negotiate the feature. See also[edit] WebSocketRepresentational State Transfer (REST) References[edit]  ^ "XMLHttpRequest object explained by the W3C Working Draft". W3.org. Retrieved 2009-07-14. ^ http://dev.w3.org/2006/webapi/FileAPI/^ "The responseXML attribute of the XMLHttpRequest object explained by the W3C Working Draft". W3.org. Retrieved 2009-07-14. ^ "Response entity body of XMLHttpRequest, W3C Editor's Draft". W3.org. 2012-02-06. Retrieved 2012-02-05. ^ "The responseText attribute of the XMLHttpRequest object explained by the W3C Working Draft". W3.org. Retrieved 2009-07-14. ^ a b "Article on the history of XMLHTTP by an original developer". Alexhopmann.com. 2007-01-31. Retrieved 2009-07-14. ^ "Specification of the IXMLHTTPRequest interface from the Microsoft Developer Network". Msdn.microsoft.com. Retrieved 2009-07-14. ^ a b c Dutta, Sunava (2006-01-23). "Native XMLHTTPRequest object". IEBlog. Microsoft. Retrieved 2006-11-30. ^ "Specification of the nsIXMLHttpRequest interface from the Mozilla Developer Center". Developer.mozilla.org. 2008-05-16. Retrieved 2009-07-14. ^ "Specification of the nsIJSXMLHttpRequest interface from the Mozilla Developer Center". Developer.mozilla.org. 2009-05-03. Retrieved 2009-07-14. ^ "Specification of the XMLHttpRequest object from the Mozilla Developer Center". Developer.mozilla.org. 2009-05-03. Retrieved 2009-07-14. ^ a b "Version history for the Mozilla Application Suite". Mozilla.org. Retrieved 2009-07-14. ^ a b "Downloadable, archived releases for the Mozilla browser". Archive.mozilla.org. Retrieved 2009-07-14. ^ "Archived news from Mozillazine stating the release date of Safari 1.2". Weblogs.mozillazine.org. Retrieved 2009-07-14. ^ "Press release stating the release date of Opera 8.0 from the Opera website". Opera.com. 2005-04-19. Retrieved 2009-07-14. ^ Soft-Info.org. "Detailed browser information stating the release date of iCab 3.0b352 from". Soft-Info.com. Retrieved 2009-07-14. ^ "Specification of the XMLHttpRequest object from the Level 1 W3C Working Draft released on April 5th, 2006". W3.org. Retrieved 2009-07-14. ^ "XMLHttpRequest W3C Working Draft 19 November 2009". W3.org. Retrieved 2009-12-17. ^ "W3C Process Document, Section 7.4.2 Last Call Announcement". W3.org. Retrieved 2009-12-17. ^ Porteneuve, Christophe (2007). "9". In Daniel H Steinberg. Raleigh, North Carolina: Pragmatic Bookshelf. p. 183. ISBN 1-934356-01-8.  Missing or empty |title= (help); |accessdate= requires |url= (help)^ Chaffer, Jonathan; Karl Swedberg (2007). Learning jQuery. Birmingham: Packt Publishing. p. 107. ISBN 978-1-84719-250-9.  |accessdate= requires |url= (help)^ Chaffer, Jonathan; Karl Swedberg (2007). jQuery Reference Guide. Birmingham: Packt Publishing. p. 156. ISBN 978-1-84719-381-0.  |accessdate= requires |url= (help)^ "Specification of the XMLHttpRequest object from the Level 2 W3C Working Draft released on February 25th, 2008". W3.org. Retrieved 2009-07-14. ^ "XMLHttpRequest Level 2, W3C Working Draft (Latest Version)". W3.org. Retrieved 2010-11-19. ^ "XMLHttpRequest Editor's Draft 5 December 2011". w3.org. Retrieved 5 December 2011. ^ "Ajax Reference (XMLHttpRequest object)". JavaScript Kit. 2008-07-22. Retrieved 2009-07-14. ^ "Dependencies of the XMLHttpRequest object explained by the W3C Working Draft". W3.org. Retrieved 2009-07-14. ^ "The "open" method of the XMLHttpRequest object explained by the W3C Working Draft". W3.org. Retrieved 2009-10-13. ^ Test-Driven JavaScript Development, Christian Johansen, ADDISON-WESLEY, 2010, p. 270^ "XMLHttpRequest - Document Object Model (DOM)". Mozilla. Retrieved 2013-04-05. ^ "In-Order AJAX Handling". Antradar Software. 2012-03-10. Retrieved 2013-04-20. ^ "XMLHttpRequest Level 2". Retrieved 2013-11-14. ^ "Can I use Cross-Origin Resource Sharing?". Retrieved 2013-11-14. ^ "XDomainRequest - Restrictions, Limitations and Workarounds". Retrieved 2013-11-14. ^ "7.1.5 Cross-Origin Request with Preflight". Retrieved 2014-04-25.   External links[edit] Wikibooks has a book on the topic of: XMLHttpRequest Specifications[edit] XMLHttpRequest (level 1) specification from W3C (abandoned Candidate Recommendation)XMLHttpRequest level 2 specification from W3C (Working Draft) Cross-Origin Resource SharingProgress Events 1.0  Browsers[edit] MSDN Library Specification of the XMLHttpRequest object for Microsoft developersXDomainRequest Specification of the XMLHttpRequest object for Mozilla developersSpecification of the XMLHttpRequest object for Opera developers Other[edit] New Tricks in XMLHttpRequest2, online tutorial by Eric Bidelman (Developer Relations, Google)"Attacking AJAX Applications", a presentation given at the Black Hat security conference. Discusses several issues involving XHR and the future of cross-domain Ajax.    vte  Internet Explorer Versions   Main   1234567891011   Other   Mobilefor Macfor UNIXIEs4Linux     Overview  HistoryAdd-onsBox modelBrowser Helper Object (BHO)Easter eggsExtensionsRemovalShells  Technologies  AcceleratorActiveXDynamic HTML HTAHTML Components favicon.icoHTML+TIMEIndex.datJScriptMHTMLMSXMLRSS PlatformSmart tagsTemporary Internet FilesVector Markup LanguageWeb SliceWPADXHR/XDomainRequest  Software & engines  Administration KitDeveloper ToolsIntegrated Windows AuthenticationTasmanTrident Chakra   Implementations  Active ChannelActive DesktopActiveMovieChannel Definition Format (.cdf)Comic Chat/Chat 2.0DirectX MediaInternet Mail and NewsMicrosoft Java Virtual Machine (MSJVM)MSN ExplorerMSN for Mac OS XNetMeetingNetShowOutlook ExpressServer Gated Cryptography (SGC)SpyglassWindows Address BookWindows Desktop Update  Events  First browser warSecond browser warDownload.jectEolas v. MicrosoftSun v. MicrosoftUnited States v. Microsoft Corp.  People  Tantek ÇelikThomas ReardonDean HachamovitchScott IsaacsInori Aizawa     Category Commons Microsoft portal Internet portal       vte  World Wide Web Consortium (W3C) Products and standards  Recommendations  ARIACanonical XMLCDFCSSDOMGeolocation APIHTML (HTML5)ITSMathMLOWLP3PPLSRDFRDF SchemaSISRSKOSSMILSOAPSRGSSSMLSVGSPARQLTimed textVoiceXMLWeb storageWSDLXFormsXHTMLXHTML+RDFaXIncludeXLinkXMLXML BaseXML EncryptionXML EventsXML Information SetXML namespaceXML SchemaXML SignatureXOPXPathXPath 2.0XPointerXProcXQueryXSLXSL-FOXSLT (elements)  Notes  XAdESXHTML+SMILXUP  Working drafts  CCXMLCURIEEMEInkMLJSON-LDMSERIFSCXMLSMIL TimesheetssXBLWICDXFDLXFramesXBLXMLHttpRequest  Guidelines  Web Content Accessibility Guidelines  Initiative  Multimodal Interaction Activity (MMI)Markup Validation ServiceWeb Accessibility InitiativeWebPlatform  Deprecated  C-HTMLHDMLJSSSPGMLVMLXHTML+MathML+SVG   Organizations    World Wide Web Foundation  Working groups  SVGCSSHTMLWebOnt (Semantic Web Activity)Device Description (DDWG)Web Hypertext Application Technology (WHATWG)   Software    CERN httpdLibwww  Browsers  Line Mode (1990–)Arena (1993–98)Agora (1994–97)Argo (1994–97)Amaya (browser/editor, 1996–2012)   Conferences  International World Wide Web Conference (IW3C) Steering Committee (IW3C2)First conference ("WWW1", 1994)        vte  Web interfaces Server-side   Protocols   CGISCGIFCGIAJPWSRPWebSocket   Server APIs   C NSAPIC ASAPIC ISAPICOM ASPJava servlet container Portlet container CIL System.Web.IHttpHandlerPython WSGIRuby RackJavaScript JSGIPerl PSGILua WSAPIOWIN   Apache modules   mod_jkmod_lispmod_monomod_parrotmod_perlmod_phpmod_proxymod_pythonmod_wsgimod_rubyPhusion Passenger   Topics   Web resource vs. Web serviceOpen APIWebhookApplication server comparison    Client-side   Browser APIs   C NPAPI LiveConnectXPConnect C NPRuntimeC PPAPI NaCl ActiveX   Web APIs    W3C   AudioCanvasCORSFileGeolocationIndexedDBMicrodataSSESVGVideoWebRTCWebSocketWeb messagingWeb storageWeb workerXMLHttpRequest   Khronos   WebCLWebGL   Others   GearsWeb SQL Database (formerly W3C)    Topics   MashupWeb IDL                        Retrieved from "https://en.wikipedia.org/w/index.php?title=XMLHttpRequest&oldid=655899790"          Categories: JavaScriptXMLHypertext Transfer ProtocolHypertext Transfer Protocol clientsAjax (programming)Microsoft application programming interfacesMicrosoft initiatives2000 introductionsHidden categories: Pages with citations lacking titlesPages using citations with accessdate and no URLArticles containing potentially dated statements from December 2011All articles containing potentially dated statementsArticles needing additional references from October 2010All articles needing additional referencesWikipedia articles needing clarification from October 2010All Wikipedia articles needing clarificationArticles with example code                      Navigation menu                      Personal tools       Create accountLog in                                  Namespaces       ArticleTalk                                      Variants                                                                     Views       ReadEditView history                        More                                                       Search                                                                                     Navigation               Main pageContentsFeatured contentCurrent eventsRandom articleDonate to WikipediaWikipedia store                   Interaction               HelpAbout WikipediaCommunity portalRecent changesContact page                   Tools               What links hereRelated changesUpload fileSpecial pagesPermanent linkPage informationWikidata itemCite this page                   Print/export               Create a bookDownload as PDFPrintable version                   Languages               Catal?ÈeštinaDeutschEspa?ol?????FrançaisBahasa IndonesiaÍslenskaItalianoMagyarNederlands???PolskiPortugu?sRomânã????????????? / srpskiSvenska???TürkçeTürkmençe????????????     Edit links                          This page was last modified on 10 April 2015, at 23:20.Text is available under the Creative Commons Attribution-ShareAlike License; additional terms may apply.  By using this site, you agree to the Terms of Use and Privacy Policy. Wikipedia® is a registered trademark of the Wikimedia Foundation, Inc., a non-profit organization.        Privacy policyAbout WikipediaDisclaimersContact WikipediaDevelopersMobile view