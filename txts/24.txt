Web Messaging                    From Wikipedia, the free encyclopedia                            Jump to:     navigation,      search          HTML   HTMLDynamic HTML    HTML5 (audiocanvasvideo)    XHTML (BasicMobile ProfileC-HTML)  HTML element (span and div)  HTML attributeHTML frameHTML editor  Character encodings (Unicode)Language codeDocument Object ModelBrowser Object ModelStyle sheets (Cascading (CSS))  Font familyWeb colors  HTML scripting  JavaScript (WebGLWebCL)  W3C (Validator)  WHATWGQuirks modeWeb storage  Web browser (layout) engine Comparisons  Document markup languagesWeb browsers Layout engine support   HTMLNon-standard HTML    HTML5 (canvasmedia)  XHTML (1.1)    vte   Web Messaging or cross-document messaging, is an API introduced in the WHATWG HTML5 draft specification, allowing documents to communicate with one another across different origins, or source domains.[1] Prior to HTML5, web browsers disallowed cross-site scripting, to protect against security attacks. This practice barred communication between non-hostile pages as well, making document interaction of any kind difficult.[1][2] Cross-document messaging allows scripts to interact across these boundaries, while providing a rudimentary level of security.    Contents  1 Requirements and attributes2 Example3 Security4 Support5 See also6 References7 External links   Requirements and attributes[edit] Using the Messaging API's postMessage method, plain text messages can be sent from one domain to another.[3] This requires that the author first obtain the Window object of the receiving document. As a result, messages can be posted to the following:[2] other frames or iframes within the sender document's windowwindows the sender document explicitly opens through JavaScript callsthe parent window of the sender documentthe window which opened the sender document The message event being received has the following attributes: data - The data, or actual content, of the incoming message.origin - The origin of the sender document. This typically includes the scheme, hostname and port. It does not include the path or fragment identifier.[1]source - the WindowProxy of where the document came from (the source window). Example[edit] Consider we want document A located on example.net to communicate with document B located on example.com, which is contained within an iframe or popup window.[1] The JavaScript for document A will look as follows:   var o = document.getElementsByTagName('iframe')[0]; o.contentWindow.postMessage('Hello B', 'http://example.com/');  The origin of our contentWindow object is passed to postMessage. It must match the origin of the document we wish to communicate with (in this case, document B). Otherwise, a security error will be thrown and the script will stop.[3] The JavaScript for document B will look as follows:   function receiver(event) {  if (event.origin == 'http://example.net') {   if (event.data == 'Hello B') {    event.source.postMessage('Hello A, how are you?', event.origin);   }   else {    alert(event.data);   }  } } window.addEventListener('message', receiver, false);  An event listener is set up to receive messages from document A. Using the origin property, it then checks that the domain of the sender is the expected domain. Document B then looks at the message, either displaying it to the user, or responding in turn with a message of its own for document A.[1] Security[edit] Poor origin checking can pose a risk for applications which employ cross-document messaging.[4] To safeguard against malicious code from foreign domains, authors should check the origin attribute to ensure messages are accepted from domains they expect to receive messages from. The format of incoming data should also be checked that it matches the expected format.[1] Support[edit] Support for cross-document messaging exists in current versions of Internet Explorer, Mozilla Firefox, Safari, Google Chrome, Opera, Opera Mini, Opera Mobile, and Android web browser.[5] Support for the API exists in the Trident, Gecko, WebKit and Presto layout engines.[6] See also[edit] Cross-site scriptingCross-site request forgerySame origin policyCross-origin resource sharingJSONP References[edit]  ^ a b c d e f Cross-Document Messaging – HTML Draft Standard^ a b WebKit DOM Programming Topics - Cross Document Messaging^ a b Remy, Sharp, Messages, Workers, and Sockets, Introducing HTML5, New Riders, 2011, p. 197-199^ HTML5 Security in a Nutshell^ When can I use Cross-Document Messaging?^ A Selection of Supported Features in HTML5  External links[edit] HTML5 Web Messaging recommendationHTML5 Web Messaging specificationCross-Document Messaging – HTML Draft Standard, WHATWG WebKit DOM Programming Topics - Cross Document Messaging, Apple Developer Library Eng, Chris (2010-05-17), HTML5 Security in a Nutshell, Veracode When can I use Cross-Document Messaging?, CanIUse A Selection of Supported Features in HTML5     vte  Web interfaces Server-side   Protocols   CGISCGIFCGIAJPWSRPWebSocket   Server APIs   C NSAPIC ASAPIC ISAPICOM ASPJava servlet container Portlet container CIL System.Web.IHttpHandlerPython WSGIRuby RackJavaScript JSGIPerl PSGILua WSAPIOWIN   Apache modules   mod_jkmod_lispmod_monomod_parrotmod_perlmod_phpmod_proxymod_pythonmod_wsgimod_rubyPhusion Passenger   Topics   Web resource vs. Web serviceOpen APIWebhookApplication server comparison    Client-side   Browser APIs   C NPAPI LiveConnectXPConnect C NPRuntimeC PPAPI NaCl ActiveX   Web APIs    W3C   AudioCanvasCORSFileGeolocationIndexedDBMicrodataSSESVGVideoWebRTCWebSocketWeb messagingWeb storageWeb workerXMLHttpRequest   Khronos   WebCLWebGL   Others   GearsWeb SQL Database (formerly W3C)    Topics   MashupWeb IDL                        Retrieved from "https://en.wikipedia.org/w/index.php?title=Web_Messaging&oldid=663201796"          Categories: HTMLApplication programming interfaces                      Navigation menu                      Personal tools       Create accountLog in                                  Namespaces       ArticleTalk                                      Variants                                                                     Views       ReadEditView history                        More                                                       Search                                                                                     Navigation               Main pageContentsFeatured contentCurrent eventsRandom articleDonate to WikipediaWikipedia store                   Interaction               HelpAbout WikipediaCommunity portalRecent changesContact page                   Tools               What links hereRelated changesUpload fileSpecial pagesPermanent linkPage informationWikidata itemCite this page                   Print/export               Create a bookDownload as PDFPrintable version                   Languages                    Add links                          This page was last modified on 20 May 2015, at 04:22.Text is available under the Creative Commons Attribution-ShareAlike License; additional terms may apply.  By using this site, you agree to the Terms of Use and Privacy Policy. Wikipedia® is a registered trademark of the Wikimedia Foundation, Inc., a non-profit organization.        Privacy policyAbout WikipediaDisclaimersContact WikipediaDevelopersMobile view